
http://mysql.taobao.org/monthly/2015/07/01/
* Change buffer的主要目的是将对二级索引的数据操作缓存下来，以此减少二级索引的随机IO，并达到操作合并的效果。
将数据页从磁盘读入内存中涉及随机 IO 访问，这也是数据库里面成本最高的操作之一，而利用写缓存（Change Buffer）可以减少 IO 操作，从而提升数据库性能。 针对非唯一普通索引页有效，因为唯一索引需要校验唯一性。
  * 以下几种情况会触发合并操作
   * 从磁盘读入数据到内存
   * 线程定时合并
   * 数据库关闭
 
  * 以下几种情况会触发写入磁盘操作
    * 线程定时同步
    * 数据库关闭
    * 缓冲池空间不够
    * redo log写满
  * 适合场景
    * 写多读少
    * 唯一索引较少

* redo log
  *   保证事务的持久性
  *   分为 redo log buffer 保存在内存，redo log file 保存在磁盘
  *   进行事务时，先修改内存中的数据，然后生成日志写入redo log buffer，提交事务，写入redo log file(追加写，顺序写入，性能比随机写好)。
     
* undo log 
   
  *   mvcc
  *   事务回滚
   * 记录聚簇索引修改（包含隐藏的列），二级索引不记录。
   * insert  事务提交后删除
   *  update  mvcc需要用到，purge线程进行删除  
